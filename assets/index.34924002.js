var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,n=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&l(e,o,t[o]);if(r)for(var o of r(t))i.call(t,o)&&l(e,o,t[o]);return e},a=(e,r)=>t(e,o(r));import{c as p,a as c,s as u,r as d,o as m,b as f,d as h,t as b,F as y,e as v,w as g,f as k,p as _,g as w,h as j,i as E,m as O,j as $,k as C,R as P,_ as D}from"./vendor.96aa1684.js";let L;const x={},A=function(e,t){if(!t)return e();if(void 0===L){const e=document.createElement("link").relList;L=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in x)return;x[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":L,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))},F=p(),I=[{path:"/",name:"Home",component:()=>A((()=>import("./Home.f7e05ed1.js")),["/assets/Home.f7e05ed1.js","/assets/Home.4414af59.css","/assets/CodeSnippet.132569b1.js","/assets/CodeSnippet.77e0e728.css","/assets/vendor.96aa1684.js"])},{path:"/start",name:"上手",component:()=>A((()=>import("./Start.118e4b3c.js")),["/assets/Start.118e4b3c.js","/assets/CodeSnippet.132569b1.js","/assets/CodeSnippet.77e0e728.css","/assets/vendor.96aa1684.js"])}],T=c({history:F,routes:I}),V="vue-component",S=["vue","vuejs","rollup","eslint","gihub-pages","gihub-actions","template","component"],U="dist/vue-component.umd.js",M="dist/vue-component.es.js",R="dist/vue-component.min.js",q={lint:"vue-cli-service lint",start:"vite",test:"vite --config vite.config.test.js","build:app":"cross-env BULID_TYPE=app vite build","build:lib":"cross-env BULID_TYPE=lib vite build","yalc:init":"yarn global add yalc nodemon","yalc:push":"yarn build:lib && yalc push","yalc:watch":"nodemon --ignore dist/ --ignore node_modules/ --watch src -C -e js,jsx,ts,vue,html,less,scss --debug -x 'yarn yalc:push'"},z={type:"git",url:"https://github.com/roftLin/vue-component.git"},B={url:"https://github.com/roftLin/vue-component/issues"},H="https://roftLin.github.com/vue-component",Y={"element-plus":"^1.0.2-beta.48",vue:"^3.0.5"},W={"@vitejs/plugin-vue":"^1.2.3","@vue/compiler-sfc":"^3.0.5","@vue/test-utils":"2.0.0-rc.0","cross-env":"^6.0.3","element-ui":"^2.10.1","highlight.js":"^9.17.1",puppeteer:"^7.1.0",sass:"^1.34.1",screenfull:"^5.0.0",vite:"^2.3.7","vite-plugin-test":"^0.0.5","vue-router":"^4.0.8"},G=["> 1%","last 2 versions"];var J={name:V,version:"0.0.1",description:"vue组件模板",keywords:S,private:!1,author:"roftLin",license:"MIT",main:U,module:M,unpkg:R,scripts:q,repository:z,bugs:B,homepage:H,dependencies:Y,devDependencies:W,browserslist:G},K=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:V,version:"0.0.1",description:"vue组件模板",keywords:S,author:"roftLin",license:"MIT",main:U,module:M,unpkg:R,scripts:q,repository:z,bugs:B,homepage:H,dependencies:Y,devDependencies:W,browserslist:G,default:J});const N=J.name.replace(/(^\w|-\w)/g,(e=>e.replace("-","").toUpperCase()));const Q={data:()=>({routes:I.filter((e=>e.name)),config:J}),created(){document.title=J.name+"-demo"},methods:{toggleFullscreen(e){u.isEnabled&&u.toggle(document.documentElement)}}},X={id:"app"},Z={class:"command"},ee={class:"nav"};Q.render=function(e,t,o,r,s,i){const l=d("router-link"),n=d("router-view");return m(),f("div",X,[h("header",null,[h("h1",null,b(s.config.name),1),h("div",Z,"yarn add "+b(s.config.name),1),h("section",ee,[(m(!0),f(y,null,v(s.routes,(e=>(m(),f(l,{key:e.path,to:e.path},{default:g((()=>[k(b(e.name),1)])),_:2},1032,["to"])))),128)),h("a",{href:`https://github.com/${s.config.author}/${s.config.name}#usage`},"文档",8,["href"]),h("a",{onClick:t[1]||(t[1]=(...e)=>i.toggleFullscreen&&i.toggleFullscreen(...e))},"切换全屏")])]),h(n)])};const te={name:"EditTable",props:{config:Object},components:{TInput:{props:["prop","rules","type","options"],render:({prop:e,rules:t,type:o="default",options:r=[],attrs:s,emit:{input:i=(()=>{})}})=>{const l={checkbox:()=>j("el-checkbox-group",a(n({},s),{on:{input(e){i(e)}}}),r.map((e=>j("el-checkbox",a(n({},e),{label:e.value,key:e.value}),[e.label])))),select:()=>j("el-select",a(n({class:"width100"},s),{on:{change(e){i(e)}}}),r.map((e=>j("el-option",a(n({},e),{key:e.value}))))),date:()=>j("el-date-picker",n({type:"date",valueFormat:"yyyy-MM-dd"},s)),switch:()=>j("el-switch",n({activeColor:"#13ce66"},s)),opt:()=>"-",default:()=>j("el-input",s)};return j("el-form-item",{prop:e,rules:t},[l[o](j)])}}},data(){const{columns:e=[],data:t=[],isDetail:o=!1,isSubmit:r=!1}=this.config||{};return{form:{list:t&&t.length>0?t.map((t=>e.reduce(((e,o)=>a(n({},e),{[o.prop]:0==t[o.prop]?t[o.prop]:t[o.prop]||("checkbox"==o.type?[]:"")})),{}))):[e.reduce(((e,t)=>a(n({},e),{[t.prop]:"checkbox"==t.type?[]:"switch"!=t.type&&""})),{isAdd:!0})]},columns:e,rules:e.reduce(((e,t)=>a(n({},e),{[t.prop]:{required:0!=t.required,message:t.label+"必填",trigger:"blur"}})),{}),isDetail:o,isSubmit:r}},methods:{componentAttrs(e,t){const{type:o,label:r}=e,s=Object.fromEntries(Object.entries(e).filter((e=>!/^(prop|edit|label|attr|format)/.test(e[0])))),i=(/^(select|el-date-picker)/.test(o)?"请选择":"请输入")+r;return Object.assign(s,{prop:`list.${t}.${e.prop}`,rules:this.rules[e.prop]}),a(n({},s),{placeholder:i})},add(){const{columns:e=[]}=this.config||{},t=e.reduce(((e,t)=>a(n({},e),{[t.prop]:"checkbox"==t.type?[]:"switch"!=t.type&&""})),{isAdd:!0});this.form.list.push(t)},save(e,t){let o=Object.keys(e).map((e=>`list.${t}.${e}`)).filter((e=>!/isAdd|opt/g.test(e))),{$refs:{form:r}}=this,s=0;r.validateField(o,(e=>{e&&s++})),0==s&&this.$emit("submit",Object.fromEntries(Object.entries(e).filter((e=>!/^(isAdd|opt)/.test(e[0])))))},del(e){this.form.list.splice(e,1),this.$refs.form.fields.forEach((t=>{t.prop.split(".")[1]==e&&t.clearValidate()}))},submit(){this.$refs.form.validate((e=>{e&&this.$emit("submit",this.form.list.map((e=>Object.fromEntries(Object.entries(e).filter((e=>!/^(isAdd|opt)/.test(e[0])))))))}))},resetField(e){this.$refs.form.fields.forEach((t=>{t.prop.split(".")[1]==e&&t.resetField()}))},reset(){this.$refs.form.resetFields()}}},oe=$();_("data-v-3765fe7e");const re=k("新增"),se=k("保存"),ie=k("删除"),le=k("重置"),ne=k("提交"),ae=k("重置");w();const pe=oe(((e,t,o,r,s,i)=>{const l=d("el-button"),n=d("el-form-item"),a=d("t-text"),p=d("el-link"),c=d("t-input"),u=d("el-table-column"),b=d("el-table"),g=d("el-form");return m(),f(g,{model:s.form,ref:"form",size:"small",rules:s.rules},{default:oe((()=>[s.isDetail?E("",!0):(m(),f(n,{key:0},{default:oe((()=>[h(l,{type:"primary",onClick:i.add},{default:oe((()=>[re])),_:1},8,["onClick"])])),_:1})),h(b,{data:s.form.list,border:""},{default:oe((()=>[(m(!0),f(y,null,v(s.columns,(e=>(m(),f(u,O({key:e.prop,label:e.label,prop:e.prop},e.attr),{default:oe((({row:t,$index:o})=>[e.edit?(m(),f(y,{key:1},[s.isDetail?(m(),f(a,{key:0,row:{item:e,row:t}},null,8,["row"])):(m(),f(y,{key:1},["opt"==e.prop?(m(),f(y,{key:0},[h(p,{type:"primary",underline:!1,onClick:e=>i.save(t,o)},{default:oe((()=>[se])),_:2},1032,["onClick"]),t.isAdd?(m(),f(p,{key:0,type:"primary",underline:!1,onClick:e=>i.del(o)},{default:oe((()=>[ie])),_:2},1032,["onClick"])):E("",!0),h(p,{type:"primary",underline:!1,onClick:e=>i.resetField(o)},{default:oe((()=>[le])),_:2},1032,["onClick"])],64)):(m(),f(c,O({key:1,modelValue:t[`${e.prop}`],"onUpdate:modelValue":o=>t[`${e.prop}`]=o},i.componentAttrs(e,o),{class:"width100"}),null,16,["modelValue","onUpdate:modelValue"]))],64))],64)):(m(),f(a,{key:0,row:{item:e,row:t}},null,8,["row"]))])),_:2},1040,["label","prop"])))),128))])),_:1},8,["data"]),s.isDetail?E("",!0):(m(),f(n,{key:1},{default:oe((()=>[s.isSubmit?(m(),f(y,{key:0},[h(l,{type:"primary",onClick:i.submit},{default:oe((()=>[ne])),_:1},8,["onClick"]),h(l,{onClick:i.reset},{default:oe((()=>[ae])),_:1},8,["onClick"])],64)):E("",!0)])),_:1}))])),_:1},8,["model","rules"])}));te.render=pe,te.__scopeId="data-v-3765fe7e";const ce=[te],ue=function(e){ce.forEach((t=>{e.component(t.name,t)}))};"undefined"!=typeof window&&window.Vue&&ue(window.Vue);A((()=>Promise.resolve().then((function(){return K}))),void 0).then((e=>{return t=`../dist/${e.name}.css`,Promise.reject(new Error("Unknown variable dynamic import: "+t));var t}));const de=C(Q);de.use(ue),de.use(T),de.use(P,{locale:D,size:"mini"}),de.mount("#app");export{J as c,N as u};
