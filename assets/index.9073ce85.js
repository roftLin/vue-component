var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,l=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&i(e,n,t[n]);return e},p=(e,r)=>t(e,n(r));import{l as a,V as c,a as u,s as d,E as m,_ as f}from"./vendor.02528e19.js";let v;const h={};function b(e,t,n,r,o,s,i,l){var p,a="function"==typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=n,a._compiled=!0),r&&(a.functional=!0),s&&(a._scopeId="data-v-"+s),i?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},a._ssrRegister=p):o&&(p=l?function(){o.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:o),p)if(a.functional){a._injectStyles=p;var c=a.render;a.render=function(e,t){return p.call(t),c(e,t)}}else{var u=a.beforeCreate;a.beforeCreate=u?[].concat(u,p):[p]}return{exports:e,options:a}}const _={};var g=b({name:"CodeSnippet",props:{code:{type:String,default:""},lang:{type:String,default:""}},computed:{result(){return a.highlight(this.lang,this.code.trim()).value},lineCount(){const e=this.result;let t=0;for(var n=0;n<e.length;++n)"\n"===e[n]&&t++;return t+1}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-snippet"},[n("div",{staticClass:"language"},[e._v(e._s(e.lang))]),n("div",{staticClass:"line-numbers"},e._l(e.lineCount,(function(t){return n("div",{key:t,staticClass:"line-number"},[e._v(e._s(t))])})),0),n("div",{staticClass:"render",domProps:{innerHTML:e._s(e.result)}})])}),[],!1,(function(e){for(let t in _)this[t]=_[t]}),null,null,null);g.options.__file="docs-src/components/CodeSnippet.vue";var y=g.exports;const C={};var E=b({data:()=>({open:!0}),computed:{title(){return this.open?"隐藏代码":"显示代码"}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collapse",class:{open:e.open}},[n("div",{staticClass:"toggle",on:{click:function(t){e.open=!e.open}}},[e._v(e._s(e.title)+" "),n("span",{staticClass:"icon"},[e._v("▼")])]),e.open?n("div",{staticClass:"content"},[e._t("default")],2):e._e()])}),[],!1,(function(e){for(let t in C)this[t]=C[t]}),"ea4d35e4",null,null);E.options.__file="docs-src/components/Collapse.vue";var w=E.exports;const $={};var S=b({name:"Home",components:{CodeSnippet:y,Collapse:w},data:()=>({mainSnippet:'\ndata () {\n  return {\n    config: {\n        isDetail: false,\n        columns: [\n          {\n            prop: "prop1",\n            label: "文本",\n            attr: { width: "180" },\n            format: ({ prop1 }) => `文本${prop1}`,\n          },\n          {\n            prop: "prop2",\n            label: "输入框",\n            attr: { minWidth: "120" },\n            edit: true,\n          },\n          {\n            prop: "prop3",\n            label: "下拉框",\n            attr: { minWidth: "120" },\n            edit: true,\n            type: "select",\n            options: [\n              { label: "选项一", value: "1" },\n              { label: "选项二", value: "2" },\n            ],\n          },\n          {\n            prop: "prop4",\n            label: "日期",\n            attr: { minWidth: "140" },\n            edit: true,\n            type: "date",\n            required: true,\n          },\n          { prop: "opt", label: "操作", attr: { minWidth: "120" }, edit: true },\n        ],\n        data: [\n          {\n            prop1: "1",\n            prop2: "输入框1",\n            prop3: "1",\n            prop4: "2021-06-17",\n          },\n          {\n            prop1: "2",\n            prop2: "输入框2",\n            prop3: "2",\n            prop4: "2021-06-17",\n          },\n          {\n            prop1: "3",\n            prop2: "",\n            prop3: "",\n            prop4: "",\n          },\n        ],\n      },\n  }\n},\nmethods: {\n  submit(res) {\n    console.log(res);\n  },\n},\n',componentSnippet:'\n<EditorTable :config="config" @submit="submit" />\n',config:{isDetail:!1,columns:[{prop:"prop1",label:"文本",attr:{width:"180"},format:({prop1:e})=>`文本${e}`},{prop:"prop2",label:"输入框",attr:{minWidth:"120"},edit:!0},{prop:"prop3",label:"下拉框",attr:{minWidth:"120"},edit:!0,type:"select",options:[{label:"选项一",value:"1"},{label:"选项二",value:"2"}]},{prop:"prop4",label:"日期",attr:{minWidth:"140"},edit:!0,type:"date",required:!0},{prop:"opt",label:"操作",attr:{minWidth:"120"},edit:!0}],data:[{prop1:"1",prop2:"输入框1",prop3:"1",prop4:"2021-06-17"},{prop1:"2",prop2:"输入框2",prop3:"2",prop4:"2021-06-17"},{prop1:"3",prop2:"",prop3:"",prop4:""}]}}),methods:{submit(e){console.log(e)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-home page"},[n("section",{staticClass:"demo"},[n("div",{staticClass:"section-content"},[n("EditorTable",{attrs:{config:e.config},on:{submit:e.submit}})],1)]),n("section",{staticClass:"snippets"},[n("Collapse",[n("div",{staticClass:"section-content"},[n("CodeSnippet",{staticClass:"snippet",attrs:{code:e.componentSnippet,lang:"html"}}),n("div",{staticClass:"plus"},[e._v("+")]),n("CodeSnippet",{staticClass:"snippet",attrs:{code:e.mainSnippet,lang:"js"}})],1)])],1)])}),[],!1,(function(e){for(let t in $)this[t]=$[t]}),null,null,null);S.options.__file="docs-src/views/Home.vue";var j=S.exports;const k=["vue","vuejs","rollup","eslint","gihub-pages","gihub-actions","template","component"],O="dist/EditorTable.umd.js",T="dist/EditorTable.es.js",x="dist/EditorTable.min.js",I={lint:"vue-cli-service lint",start:"vite",test:"vite --config vite.config.test.js","build:app":"cross-env BULID_TYPE=app vite build","build:lib":"cross-env BULID_TYPE=lib vite build","yalc:init":"yarn global add yalc nodemon","yalc:push":"yarn build:lib && yalc push","yalc:watch":"nodemon --ignore dist/ --ignore node_modules/ --watch src -C -e js,jsx,ts,vue,html,less,scss --debug -x 'yarn yalc:push'"},A={type:"git",url:"https://github.com/roftLin/EditorTable.git"},D={url:"https://github.com/roftLin/EditorTable/issues"},P="https://roftLin.github.com/EditorTable",L={vue:"^2.6.10"},V={"@vue/compiler-sfc":"^3.0.5","@vue/test-utils":"2.0.0-rc.0","cross-env":"^6.0.3","highlight.js":"^9.17.1",puppeteer:"^7.1.0",sass:"^1.34.1",screenfull:"^5.0.0",vite:"^2.3.7","vite-plugin-test":"^0.0.5","vite-plugin-vue2":"^1.6.2","vue-router":"3.0.1","element-ui":"^2.10.1"},F=["> 1%","last 2 versions"];var W={name:"EditorTable",version:"0.0.1",description:"vue组件模板",keywords:k,private:!1,author:"roftLin",license:"MIT",main:O,module:T,unpkg:x,scripts:I,repository:A,bugs:D,homepage:P,dependencies:L,devDependencies:V,browserslist:F},M=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:"EditorTable",version:"0.0.1",description:"vue组件模板",keywords:k,author:"roftLin",license:"MIT",main:O,module:T,unpkg:x,scripts:I,repository:A,bugs:D,homepage:P,dependencies:L,devDependencies:V,browserslist:F,default:W});const R=W.name.replace(/(^\w|-\w)/g,(e=>e.replace("-","").toUpperCase()));const U=`\nimport Vue from 'vue'\nimport App from './App.vue'\nimport ${R} from '${W.name}'\nimport '${W.name}.css'\n\nVue.use(${R})\n\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n});\n`,q={};var H=b({name:"Start",components:{CodeSnippet:y},data:()=>({mainSnippet:U})},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-Start page"},[n("section",{staticClass:"snippets"},[n("div",{staticClass:"section-content"},[n("CodeSnippet",{staticClass:"snippet",attrs:{code:e.mainSnippet,lang:"js"}})],1)])])}),[],!1,(function(e){for(let t in q)this[t]=q[t]}),null,null,null);H.options.__file="docs-src/views/Start.vue";var z=H.exports;c.use(u);const B=[{path:"/",name:"Home",component:j},{path:"/start",name:"上手",component:z},{path:"*",redirect:"/"}],N=new u({mode:"history",routes:B});const X={};var Y=b({data:()=>({routes:B.filter((e=>e.name)),config:W}),created(){document.title=W.name+"-demo"},methods:{toggleFullscreen(e){d.isEnabled&&d.toggle(document.documentElement)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",[n("h1",[e._v(e._s(e.config.name))]),n("div",{staticClass:"command"},[e._v("yarn add "+e._s(e.config.name))]),n("section",{staticClass:"nav"},[e._l(e.routes,(function(t){return n("router-link",{key:t.path,attrs:{to:t.path}},[e._v(e._s(t.name))])})),n("a",{attrs:{href:"https://github.com/"+e.config.author+"/"+e.config.name+"#usage"}},[e._v("文档")]),n("a",{on:{click:e.toggleFullscreen}},[e._v("切换全屏")])],2)]),n("router-view")],1)}),[],!1,(function(e){for(let t in X)this[t]=X[t]}),null,null,null);Y.options.__file="docs-src/App.vue";var G=Y.exports;const J={};var K=b({functional:!0,props:{prop:{type:String,default:""},rules:{type:Object,default:()=>{}},type:{type:String,default:"input"},options:{type:Array,default:()=>[]}},render:(e,{props:{prop:t,rules:n,type:r,options:o},data:s,listeners:{input:i=(()=>{})}})=>e("el-form-item",{props:{prop:t,rules:n}},[{input:e=>e("el-input",s),select:e=>e("el-select",{props:l({},s.attrs),on:{change(e){i(e)}}},o.map((t=>e("el-option",{props:p(l({},t),{key:t.value})})))),date:e=>e("el-date-picker",l({props:{type:"date",valueFormat:"yyyy-MM-dd"}},s)),opt:()=>""}[r](e)])},undefined,undefined,!1,(function(e){for(let t in J)this[t]=J[t]}),null,null,null);K.options.__file="src/lib/CommonInput.vue";var Q=K.exports;const Z={};var ee=b({props:{column:{type:Object,default:()=>({})},row:{type:Object,default:()=>({})}}},(function(e,t){var n=t._c;return n("div",[t.props.row[t.props.column.prop]?t._e():n("span"),t.props.column.format&&"function"==typeof t.props.column.format?n("span",[t._v(t._s(t.props.column.format(t.props.row)))]):n("span",[t._v(t._s(t.props.row[t.props.column.prop]))])])}),[],!0,(function(e){for(let t in Z)this[t]=Z[t]}),null,null,null);ee.options.__file="src/lib/CommonText.vue";var te=ee.exports;const ne={};var re=b({name:"EditorTable",props:{config:Object,default:()=>({})},components:{CommonInput:Q,CommonText:te},data(){const{columns:e=[],data:t=[],isDetail:n=!1,isSubmit:r=!1}=this.config||{};return{form:{list:t&&t.length>0?t.map((t=>e.reduce(((e,n)=>p(l({},e),{[n.prop]:t[n.prop]||""})),{}))):[this.createInitItem()]},columns:e,rules:e.reduce(((e,t)=>p(l({},e),{[t.prop]:{required:!1!==t.required,message:t.label+"必填",trigger:"blur"}})),{}),isDetail:n,isSubmit:r}},methods:{createInitItem(){const{columns:e=[]}=this.config||{};return e.reduce(((e,t)=>p(l({},e),{[t.prop]:""})),{isAdd:!0})},initAttrs(e,t){const{type:n,label:r}=e,o=Object.fromEntries(Object.entries(e).filter((([e])=>!/(prop|edit|label|attr|format)/.test(e))));return Object.assign(o,{prop:`list.${t}.${e.prop}`,rules:this.rules[e.prop],placeholder:(/(select|el-date-picker)/.test(n)?"请选择":"请输入")+r}),o},add(){this.form.list.push(this.createInitItem())},save(e,t){const n=Object.keys(e).map((e=>`list.${t}.${e}`)).filter((e=>!/isAdd|opt/g.test(e)));let r=0;this.$refs.form.validateField(n,(e=>{e&&r++})),0===r&&this.$emit("submit",Object.fromEntries(Object.entries(e).filter((([e])=>!/^(isAdd|opt)/.test(e)))))},del(e){this.form.list.splice(e,1),this.$refs.form.fields.forEach((t=>{t.prop.split(".")[1]===e&&t.clearValidate()}))},submit(){this.$refs.form.validate((e=>{e&&this.$emit("submit",this.form.list.map((e=>Object.fromEntries(Object.entries(e).filter((([e])=>!/^(isAdd|opt)/.test(e)))))))}))},resetField(e){this.$refs.form.fields.forEach((t=>{t.prop.split(".")[1]===e+""&&t.resetField()}))},reset(){this.$refs.form.resetFields()}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{model:e.form,size:"small",rules:e.rules}},[e.isDetail?e._e():n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1),n("el-table",{attrs:{data:e.form.list,border:""}},e._l(e.columns,(function(t){return n("el-table-column",e._b({key:t.prop,attrs:{label:t.label,prop:t.prop},scopedSlots:e._u([{key:"default",fn:function(r){var o=r.row,s=r.$index;return[t.edit?[e.isDetail?n("CommonText",{attrs:{column:t,row:o}}):["opt"!==t.prop?n("CommonInput",e._b({staticClass:"width100",model:{value:o[""+t.prop],callback:function(n){e.$set(o,""+t.prop,n)},expression:"row[`${column.prop}`]"}},"CommonInput",e.initAttrs(t,s),!1)):[n("div",[n("el-link",{attrs:{type:"primary",underline:!1,cl:""},on:{click:function(t){return e.save(o,s)}}},[e._v("保存")]),o.isAdd?n("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.del(s)}}},[e._v("删除")]):e._e(),n("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.resetField(s)}}},[e._v("重置")])],1)]]]:n("CommonText",{attrs:{column:t,row:o}})]}}],null,!0)},"el-table-column",t.attr,!1))})),1),e.isDetail?e._e():n("el-form-item",[e.isSubmit?[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),n("el-button",{on:{click:e.reset}},[e._v("重置")])]:e._e()],2)],1)}),[],!1,(function(e){for(let t in ne)this[t]=ne[t]}),null,null,null);re.options.__file="src/lib/index.vue";const oe=[re.exports],se=function(e){oe.forEach((t=>{e.component(t.name,t)}))};"undefined"!=typeof window&&window.Vue&&se(window.Vue);(function(e,t){if(!t)return e();if(void 0===v){const e=document.createElement("link").relList;v=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in h)return;h[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":v,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))})((()=>Promise.resolve().then((function(){return M}))),void 0).then((e=>{return t=`../dist/${e.name}.css`,Promise.reject(new Error("Unknown variable dynamic import: "+t));var t})),c.use(se),c.use(m,{locale:f,size:"mini"}),new c({el:"#app",router:N,render:e=>e(G)});
